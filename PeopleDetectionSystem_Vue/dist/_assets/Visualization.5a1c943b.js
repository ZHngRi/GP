let e=document.createElement("style");e.innerHTML=".linechart1[data-v-3f142e44]{height:100%;width:100%}.block[data-v-3f142e44]{position:absolute;right:5px;top:5px;z-index:9999}.linechart1[data-v-3d3829a6]{height:100%;width:100%}.block[data-v-3d3829a6]{position:absolute;right:5px;top:5px;z-index:9999}.linechart1[data-v-4dba6228]{height:100%;width:100%}.block[data-v-4dba6228]{position:absolute;right:5px;top:5px;z-index:9999}.linechart1[data-v-69066216]{height:100%;width:100%}.block[data-v-69066216]{position:absolute;right:5px;top:5px;z-index:9999}.demo-tabs,.demo-tabs .el-tab-pane,.demo-tabs>.el-tabs__content{height:100%}.note[data-v-e262a9cc]{position:absolute;background-color:#fff;width:80px;height:30px;cursor:default;text-align:center;line-height:1.8;border-radius:5px;box-shadow:0 2px 5px #6d6d6d}.con[data-v-e262a9cc]{width:100%;height:100%;position:relative}#container[data-v-e262a9cc]{width:100%;height:100%}.numCon[data-v-31fa14c8]{height:100%;background-color:#fff;border-radius:10px;font-family:SimHei}.now[data-v-31fa14c8]{width:20%;background-color:#518aff;color:#fff}.nowpeople[data-v-31fa14c8]{font-size:20px;font-weight:700;margin:8px}.nowpeoplenum[data-v-31fa14c8]{font-size:32px;font-weight:700;text-align:center;margin-top:20px;Letter-spacing:4px}.pro[data-v-31fa14c8]{margin-left:20px;margin-top:10px}.peo[data-v-31fa14c8]{margin-left:20px;font-size:small}.en[data-v-31fa14c8],.month[data-v-31fa14c8],.today[data-v-31fa14c8],.week[data-v-31fa14c8]{width:15%}.icon[data-v-31fa14c8]{display:flex;justify-content:center;align-items:center}.icon img[data-v-31fa14c8]{margin-right:20px}.numright[data-v-31fa14c8]{text-align:center}.numin[data-v-31fa14c8]{font-size:22px;margin-top:10px}.container[data-v-22b3a998]{background-color:#f1f8f8;height:100%;width:100%}.num[data-v-22b3a998]{display:flex;height:17%;justify-content:space-between;align-items:center}.maTa[data-v-22b3a998]{display:flex;height:37%;justify-content:space-between;align-items:center}.line[data-v-22b3a998]{height:45%;background-color:#fff;border-radius:10px}.maTaCon[data-v-22b3a998]{height:85%;background-color:#fff;border-radius:10px}.map[data-v-22b3a998]{width:40%}.table[data-v-22b3a998]{width:30%}.pic[data-v-22b3a998]{width:28%}.word[data-v-22b3a998]{margin:20px;font-family:SimHei;height:85%;overflow:auto}.word div[data-v-22b3a998]{font-size:18px;font-weight:700;color:#444}.word p[data-v-22b3a998]{margin-top:10px;font-size:16px;color:#444}",document.head.appendChild(e);import{u as a,a as t,r as n,l as o,o as i,b as r,c as s,d as l,e as d,i as c,f as p,F as u,j as h,g,m,n as f,v,t as y,p as w,q as x,s as b}from"./index.9ca7c293.js";var k={name:"LineDay",setup(){const e=a(),s=t();let l=n({day1:"",perday:{},cameras:{}});function d(){for(var e=Object.keys(l.perday),a=0;a<e.length;a++)if(0==e[a])l.option.legend.data[a]="总计",l.option.series[a]={name:"总计",type:"line",smooth:!0,data:l.perday[e[a]]};else{var t=l.cameras.filter((function(t){return t.id==e[a]}));l.option.legend.data[a]=t[0].name,l.option.series[a]={name:t[0].name,type:"line",smooth:!0,data:l.perday[e[a]]}}}return l.option=o((()=>({title:{text:"单日人流量"},tooltip:{trigger:"axis"},legend:{show:!0,data:Object.keys(l.perday)},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:{type:"category",boundaryGap:!1,data:["0:00","1:00","2:00","3:00","4:00","5:00","6:00","7:00","8:00","9:00","10:00","11:00","12:00","13:00","14:00","15:00","16:00","17:00","18:00","19:00","20:00","21:00","22:00","23:00"]},yAxis:{type:"value"},series:[]}))),i((()=>{l.cameras=e.state.camera,r.get("api/detection/perday/"+function(){const e=new Date;return`${e.getFullYear()}-${e.getMonth()+1}-${e.getDate()}`}()).then((e=>{l.perday=e.data,d()}),(e=>{console.log(e),401==e.response.status&&s.push("login")}))})),{data:l,daydatechange:function(){r.get("api/detection/perday/"+l.day1).then((e=>{l.perday=e.data,d()}),(e=>{console.log(e)}))}}}};const M={class:"block"},C={class:"linechart1"};k.render=function(e,a,t,n,o,i){const r=s("el-date-picker"),h=s("v-chart");return l(),d(u,null,[c("div",M,[p(r,{modelValue:n.data.day1,"onUpdate:modelValue":a[0]||(a[0]=e=>n.data.day1=e),"value-format":"YYYY-MM-DD",type:"date",placeholder:"今日",onChange:n.daydatechange},null,8,["modelValue","onChange"])]),c("div",C,[p(h,{class:"charts",option:n.data.option,autoresize:""},null,8,["option"])])],64)},k.__scopeId="data-v-3f142e44";var Y={name:"LineWeek",setup(){const e=a(),s=t();let l=n({week1:"",perweek:{},cameras:{},value1:""});function d(){for(var e=Object.keys(l.perweek),a=0;a<e.length;a++)if(0==e[a])l.option.legend.data[a]="总计",l.option.series[a]={name:"总计",type:"line",smooth:!0,data:l.perweek[e[a]]};else{var t=l.cameras.filter((function(t){return t.id==e[a]}));l.option.legend.data[a]=t[0].name,l.option.series[a]={name:t[0].name,type:"line",smooth:!0,data:l.perweek[e[a]]}}}return l.option=o((()=>({title:{text:"周人流量"},tooltip:{trigger:"axis"},legend:{show:!0,data:Object.keys(l.perweek)},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:{type:"category",boundaryGap:!1,data:["星期日","星期一","星期二","星期三","星期四","星期五","星期六"]},yAxis:{type:"value"},series:[]}))),i((()=>{l.cameras=e.state.camera;var a=new Date,t=a.getDay(),n=new Date(864e5*t),o=new Date(a-n),i=o.getFullYear(),c=o.getMonth()+1,p=o.getDate();c<10&&(c="0"+c),p<10&&(p="0"+p);var u=i+"-"+c+"-"+p;r.get("api/detection/perweek/"+u).then((e=>{l.perweek=e.data,d()}),(e=>{console.log(e),401==e.response.status&&s.push("login")}))})),{data:l,weekdatechange:function(){console.log(l.week1),r.get("api/detection/perweek/"+l.week1).then((e=>{l.perweek=e.data,d()}),(e=>{console.log(e)}))}}}};const _={class:"block"},D={class:"linechart1"};Y.render=function(e,a,t,n,o,i){const r=s("el-date-picker"),h=s("v-chart");return l(),d(u,null,[c("div",_,[p(r,{modelValue:n.data.week1,"onUpdate:modelValue":a[0]||(a[0]=e=>n.data.week1=e),"value-format":"YYYY-MM-DD",type:"week",format:"[Week] ww",placeholder:"本周",onChange:n.weekdatechange},null,8,["modelValue","onChange"])]),c("div",D,[p(h,{class:"charts",option:n.data.option,autoresize:""},null,8,["option"])])],64)},Y.__scopeId="data-v-3d3829a6";var L={name:"LineMonth",setup(){const e=t(),s=a();let l=n({month1:"",permonth:{},cameras:{}});function d(){l.option.xAxis.data=[[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31],[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28],[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31],[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30],[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31],[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30],[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31],[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31],[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30],[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31],[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30],[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31]][parseInt(l.month1.split("-")[1])-1];for(var e=Object.keys(l.permonth),a=0;a<e.length;a++)if(0==e[a])l.option.legend.data[a]="总计",l.option.series[a]={name:"总计",type:"line",smooth:!0,data:l.permonth[e[a]]};else{var t=l.cameras.filter((function(t){return t.id==e[a]}));l.option.legend.data[a]=t[0].name,l.option.series[a]={name:t[0].name,type:"line",smooth:!0,data:l.permonth[e[a]]}}}return l.option=o((()=>({title:{text:"月人流量"},tooltip:{trigger:"axis"},legend:{show:!0,data:Object.keys(l.permonth)},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:{type:"category",boundaryGap:!1,data:[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31]},yAxis:{type:"value"},series:[]}))),i((()=>{l.cameras=s.state.camera,r.get("api/detection/permonth/"+function(){const e=new Date;return`${e.getFullYear()}-${e.getMonth()+1<=9?"0"+(e.getMonth()+1):e.getMonth()+1}`}()).then((e=>{l.permonth=e.data,d()}),(a=>{console.log(a),401==a.response.status&&e.push("login")}))})),{data:l,monthdatechange:function(){r.get("api/detection/permonth/"+l.month1).then((e=>{l.permonth=e.data,d()}),(e=>{console.log(e)}))}}}};const X={class:"block"},z={class:"linechart1"};L.render=function(e,a,t,n,o,i){const r=s("el-date-picker"),h=s("v-chart");return l(),d(u,null,[c("div",X,[p(r,{modelValue:n.data.month1,"onUpdate:modelValue":a[0]||(a[0]=e=>n.data.month1=e),type:"month","value-format":"YYYY-MM",placeholder:"本月",onChange:n.monthdatechange},null,8,["modelValue","onChange"])]),c("div",z,[p(h,{class:"charts",option:n.data.option,autoresize:""},null,8,["option"])])],64)},L.__scopeId="data-v-4dba6228";var A={name:"LineYear",setup(){const e=a(),s=t();let l=n({year1:"",peryear:{},cameras:{}});function d(){for(var e=Object.keys(l.peryear),a=0;a<e.length;a++)if(0==e[a])l.option.legend.data[a]="总计",l.option.series[a]={name:"总计",type:"line",smooth:!0,data:l.peryear[e[a]]};else{var t=l.cameras.filter((function(t){return t.id==e[a]}));l.option.legend.data[a]=t[0].name,l.option.series[a]={name:t[0].name,type:"line",smooth:!0,data:l.peryear[e[a]]}}}return l.option=o((()=>({title:{text:"年人流量"},tooltip:{trigger:"axis"},legend:{show:!0,data:Object.keys(l.peryear)},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:{type:"category",boundaryGap:!1,data:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"]},yAxis:{type:"value"},series:[]}))),i((()=>{l.cameras=e.state.camera,r.get("api/detection/peryear/"+(new Date).getFullYear()).then((e=>{l.peryear=e.data,d()}),(e=>{console.log(e)}))})),{data:l,yeardatechange:function(){r.get("api/detection/peryear/"+l.year1).then((e=>{l.peryear=e.data,d()}),(e=>{console.log(e),401==e.response.status&&s.push("login")}))}}}};const I={class:"block"},j={class:"linechart1"};A.render=function(e,a,t,n,o,i){const r=s("el-date-picker"),h=s("v-chart");return l(),d(u,null,[c("div",I,[p(r,{modelValue:n.data.year1,"onUpdate:modelValue":a[0]||(a[0]=e=>n.data.year1=e),"value-format":"YYYY",type:"year",placeholder:"本年",onChange:n.yeardatechange},null,8,["modelValue","onChange"])]),c("div",j,[p(h,{class:"charts",option:n.data.option,autoresize:""},null,8,["option"])])],64)},A.__scopeId="data-v-69066216";var S={name:"LineChart",components:{LineDay:k,LineWeek:Y,LineMonth:L,LineYear:A},setup(){let e=n({});return i((()=>{})),{data:e}}};S.render=function(e,a,t,n,o,i){const r=s("LineDay"),d=s("el-tab-pane"),c=s("LineWeek"),u=s("LineMonth"),m=s("LineYear"),f=s("el-tabs");return l(),h(f,{"tab-position":"right",class:"demo-tabs"},{default:g((()=>[p(d,{label:"日"},{default:g((()=>[p(r)])),_:1}),p(d,{label:"周"},{default:g((()=>[p(c)])),_:1}),p(d,{label:"月"},{default:g((()=>[p(u)])),_:1}),p(d,{label:"年"},{default:g((()=>[p(m)])),_:1})])),_:1})};var V={name:"PieChart",setup(){const e=a(),s=t(),l=m(null);let d=n({perday:{},cameras:{}});return d.option=o((()=>({title:{text:"当日各位置人数分布",subtext:"以进入人次统计",left:"center"},tooltip:{},legend:{orient:"horizontal",x:"center",y:"bottom"},series:[{name:"Access From",type:"pie",radius:"50%",data:[],emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]}))),i((()=>{d.cameras=e.state.camera,r.get("api/detection/perday/"+function(){const e=new Date;return`${e.getFullYear()}-${e.getMonth()+1}-${e.getDate()}`}()).then((e=>{d.perday=e.data,function(){for(var e=Object.keys(d.perday),a=0,t=0;t<e.length;t++)if(0!=e[t]){var n=d.cameras.filter((function(a){return a.id==e[t]}));d.option.series[0].data[a]={value:d.perday[e[t]].reduce(((e,a)=>e+a),0),name:n[0].name},a++}l.value.setOption(d.option,!0)}()}),(e=>{console.log(e),401==e.response.status&&s.push("login")}))})),{data:d,chart:l}}};V.render=function(e,a,t,n,o,i){const r=s("v-chart");return l(),h(r,{ref:"chart",class:"charts",option:n.data.option},null,8,["option"])};var $={name:"Map",setup(){const e=a();let t=n({cameras:{},camera:"",show:!1});function o(e){t.show=!0;let a=document.getElementById("note");a.style.left=parseInt(e.pixel.getX())-85+"px",a.style.top=parseInt(e.pixel.getY())-35+"px",t.camera=t.cameras[e.target.getExtData()].name}function r(e){t.show=!1}function s(e){}return i((()=>{t.cameras=e.state.camera,function(){var e=new AMap.Map(document.getElementById("container"),{zoom:18});e.on("indoor_create",(function(){e.indoorMap.showIndoorMap("B0FFIL7S89",1)}));var a=new AMap.TileLayer.Traffic({autoRefresh:!0,interval:180});e.add(a);for(var n=new AMap.Icon({size:new AMap.Size(40,40),image:"../src/assets/camera.svg",imageSize:new AMap.Size(40,40)}),i=Object.keys(t.cameras),l=0;l<i.length;l++){var d=t.cameras[i[l]].positionx,c=t.cameras[i[l]].positiony,p=new AMap.Marker({position:new AMap.LngLat(d,c),icon:n,offset:new AMap.Pixel(-12,-20)});p.setExtData(i[l]),p.on("click",s),p.on("mouseover",o),p.on("mouseout",r),e.add(p)}}()})),{data:t}}};const O={class:"con"},F=(e=>(w("data-v-e262a9cc"),e=e(),x(),e))((()=>c("div",{id:"container"},null,-1)));$.render=function(e,a,t,n,o,i){return l(),d("div",O,[F,f(c("div",{id:"note",class:"note"},y(n.data.camera),513),[[v,n.data.show]])])},$.__scopeId="data-v-e262a9cc";var T={name:"NumShow",setup(){a();const e=t();let o=n({nowpeople:0,todaypeople:0,monthpeople:0,sum:0,timeold:"",inter:"",colors:[{color:"#f56c6c",percentage:20},{color:"#e6a23c",percentage:40},{color:"#5cb87a",percentage:60},{color:"#1989fa",percentage:80},{color:"#6f7ad3",percentage:100}]});function s(){r.get("api/detection/nowpeople").then((e=>{o.nowpeople=e.data}),(a=>{console.log(a),401==a.response.status&&e.push("login")})),r.get("api/detection/perday/"+function(){const e=new Date;return`${e.getFullYear()}-${e.getMonth()+1}-${e.getDate()}`}()).then((e=>{o.todaypeople=e.data[0].reduce(((e,a)=>e+a),0)}),(a=>{console.log(a),401==a.response.status&&e.push("login")})),r.get("api/detection/permonth/"+function(){const e=new Date;return`${e.getFullYear()}-${e.getMonth()+1<=9?"0"+(e.getMonth()+1):e.getMonth()+1}`}()).then((e=>{o.monthpeople=e.data[0].reduce(((e,a)=>e+a),0)}),(a=>{console.log(a),401==a.response.status&&e.push("login")})),r.get("api/detection/sum/").then((e=>{o.sum=e.data}),(a=>{console.log(a),401==a.response.status&&e.push("login")}));var a=new Date,t=new Date("1/1/2023 00:00:00"),n=(a-t)/1e3/60/60/24,i=Math.floor(n),s=(a-t)/1e3/60/60-24*i,l=Math.floor(s);1==String(l).length&&(l="0"+l);var d=(a-t)/1e3/60-1440*i-60*l,c=Math.floor(d);1==String(c).length&&(c="0"+c);var p=(a-t)/1e3-86400*i-3600*l-60*c,u=Math.round(p);1==String(u).length&&(u="0"+u),o.timeold=i+"天"+l+"时"}return i((()=>{o.inter=setInterval(s,1e3)})),b((()=>{clearInterval(o.inter)})),{data:o}}};const E=e=>(w("data-v-31fa14c8"),e=e(),x(),e),B={class:"now numCon"},G=E((()=>c("div",{class:"nowpeople"},"当前人数：",-1))),P={class:"nowpeoplenum"},U={class:"pro"},W={class:"peo"},H={class:"today numCon icon"},N=E((()=>c("img",{src:"/_assets/day.86553c5f.svg",style:{width:"40px",height:"40px"}},null,-1))),q={class:"numright"},R=E((()=>c("div",null,"当天人次",-1))),J={class:"numin"},K={class:"week numCon icon"},Q=E((()=>c("img",{src:"/_assets/week.3106323c.svg",style:{width:"40px",height:"40px"}},null,-1))),Z={class:"numright"},ee=E((()=>c("div",null,"本周人次",-1))),ae={class:"numin"},te={class:"month numCon icon"},ne=E((()=>c("img",{src:"/_assets/month.04b65934.svg",style:{width:"45px",height:"45px"}},null,-1))),oe={class:"numright"},ie=E((()=>c("div",null,"本月人次",-1))),re={class:"numin"},se={class:"en numCon icon"},le=E((()=>c("img",{src:"/_assets/sum.f9ad0f81.svg",style:{width:"45px",height:"45px"}},null,-1))),de={class:"numright"},ce=E((()=>c("div",null,"累计人次",-1))),pe={class:"numin"},ue={class:"en numCon icon"},he=E((()=>c("img",{src:"/_assets/time.1b64549f.svg",style:{width:"45px",height:"45px"}},null,-1))),ge={class:"numright"},me=E((()=>c("div",null,"运营时长",-1))),fe={class:"numin"};T.render=function(e,a,t,n,o,i){const r=s("el-progress");return l(),d(u,null,[c("div",B,[G,c("div",P,y(n.data.nowpeople)+" 人",1),c("div",U,[p(r,{percentage:parseInt(n.data.nowpeople)/100,color:n.data.colors},null,8,["percentage","color"])]),c("div",W,"可承载人数："+y(n.data.nowpeople)+"人/10000人",1)]),c("div",H,[N,c("div",q,[R,c("div",J,y(n.data.todaypeople)+"人",1)])]),c("div",K,[Q,c("div",Z,[ee,c("div",ae,y(n.data.monthpeople)+"人",1)])]),c("div",te,[ne,c("div",oe,[ie,c("div",re,y(n.data.monthpeople)+"人",1)])]),c("div",se,[le,c("div",de,[ce,c("div",pe,y(n.data.sum)+"人",1)])]),c("div",ue,[he,c("div",ge,[me,c("div",fe,y(n.data.timeold),1)])])],64)},T.__scopeId="data-v-31fa14c8";var ve={name:"Visualization",components:{LineChart:S,PieChart:V,Map:$,NumShow:T},setup(){let e=n({});return i((()=>{})),{data:e}}};const ye={class:"container"},we={class:"num"},xe={class:"maTa"},be={class:"table maTaCon"},ke={class:"map maTaCon"},Me=(e=>(w("data-v-22b3a998"),e=e(),x(),e))((()=>c("div",{class:"pic maTaCon"},[c("div",{class:"word"},[c("div",null,"商场简介："),c("p",null,"商场名称:XXX 商场"),c("p",null,"商场地址:XXX 市 XXX 区 XXX 路 XXX 号"),c("p",null,"商场简介:XXX 商场是一家大型综合性商场，总面积超过 XXX 平方米，拥有多个楼层和多样化的购物区。商场内部装修精美，设施完善，为消费者提供了舒适便利的购物环境。"),c("p",null,"商场经营范围广泛，涵盖了服装、鞋帽、化妆品、家居用品、餐饮等多个方面。商场内部还设有停车场，方便消费者购物停车。")])],-1))),Ce={class:"line"};ve.render=function(e,a,t,n,o,i){const r=s("NumShow"),u=s("PieChart"),h=s("Map"),g=s("LineChart");return l(),d("div",ye,[c("div",we,[p(r)]),c("div",xe,[c("div",be,[p(u)]),c("div",ke,[p(h)]),Me]),c("div",Ce,[p(g)])])},ve.__scopeId="data-v-22b3a998";export{ve as default};
