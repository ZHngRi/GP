import{a,u as e,r as d,o as t,E as l,b as o,c as n,d as s,e as i,f as m,g as u,F as p,h as r,i as c,t as f}from"./index.9ca7c293.js";var y={name:"Camera",setup(){const n=a(),s=e();let i=d({cameras:s.state.camera,modifyflag:!1,modifydata:{},addflag:!1,adddata:{name:"",ip:"",positionx:"",positiony:"",describe1:""}});return t((()=>{})),{data:i,modify:function(a){"administrator"==window.localStorage.getItem("usertype")?(i.modifyflag=!0,i.modifydata=a):l({message:"您无权限修改，请联系管理员。",type:"warning"})},delete1:function(a){"administrator"==window.localStorage.getItem("usertype")?o.post("api/camera/delete/"+a).then((function(e){1==e.data?(i.cameras=i.cameras.filter((e=>e.id!=a)),s.commit("add",i.cameras),l({message:"删除成功",type:"success"})):l({message:"删除失败",type:"warning"})})).catch((function(a){console.log(a),401==a.response.status?(l({message:"您尚未登录",type:"warning"}),n.push("login")):403==a.response.status?l({message:"您无删除权限，请联系管理员。",type:"warning"}):400==a.response.status&&l({message:"请按要求填写。",type:"warning"})})):l({message:"您无权限删除，请联系管理员。",type:"warning"})},modifysubmit:function(){o.post("api/camera/update",i.modifydata).then((function(a){1==a.data?(s.commit("add",i.cameras),i.modifyflag=!1,l({message:"修改成功",type:"success"})):l({message:"修改失败",type:"warning"})})).catch((function(a){console.log(a),401==a.response.status?(l({message:"您尚未登录",type:"warning"}),n.push("login")):403==a.response.status&&l({message:"您无修改权限，请联系管理员。",type:"warning"})}))},add:function(){"administrator"==window.localStorage.getItem("usertype")?i.addflag=!0:l({message:"您无权限添加，请联系管理员。",type:"warning"})},addsubmit:function(){o.post("api/camera/save",i.adddata).then((function(a){1==a.data?(i.addflag=!1,l({message:"添加成功",type:"success"}),location.reload()):l({message:"添加失败",type:"warning"})})).catch((function(a){console.log(a),401==a.response.status?(l({message:"您尚未登录",type:"warning"}),n.push("login")):403==a.response.status?l({message:"您无添加权限，请联系管理员。",type:"warning"}):400==a.response.status&&l({message:"请按要求填写。",type:"warning"})}))}}}};const g=c("br",null,null,-1),V=c("span",null,"摄像头名称：",-1),w=c("span",null,"摄像头ip:",-1),b=c("span",null,"摄像头坐标(经度):",-1),h=c("span",null,"摄像头坐标(纬度):",-1),U=c("span",null,"备注:",-1),x=c("span",null,"摄像头名称：",-1),C=c("span",null,"摄像头ip:",-1),k=c("span",null,"摄像头坐标(经度):",-1),_=c("span",null,"摄像头坐标(纬度):",-1),I=c("span",null,"备注:",-1);y.render=function(a,e,d,t,l,o){const y=n("el-table-column"),S=n("el-button"),v=n("el-popconfirm"),z=n("el-table"),j=n("el-input"),D=n("el-dialog");return s(),i(p,null,[m(z,{data:t.data.cameras,style:{width:"100%"},stripe:""},{default:u((()=>[m(y,{fixed:"",prop:"id",label:"摄像头编号",width:"120"}),m(y,{fixed:"",prop:"name",label:"摄像头名称",width:"150"}),m(y,{prop:"ip",label:"摄像头ip",width:"150"}),m(y,{prop:"positionx",label:"摄像头坐标(经度)",width:"150"}),m(y,{prop:"positiony",label:"摄像头坐标(纬度)",width:"150"}),m(y,{prop:"describe1",label:"备注"}),m(y,{fixed:"right",label:"Operations",width:"120"},{default:u((a=>[m(S,{link:"",type:"primary",size:"small",onClick:e=>t.modify(a.row)},{default:u((()=>[r("修改")])),_:2},1032,["onClick"]),m(v,{title:"确定要删除吗？",onConfirm:e=>t.delete1(a.row.id)},{reference:u((()=>[m(S,{link:"",type:"primary",size:"small"},{default:u((()=>[r("删除")])),_:1})])),_:2},1032,["onConfirm"])])),_:1})])),_:1},8,["data"]),m(S,{type:"primary",onClick:t.add},{default:u((()=>[r("添加")])),_:1},8,["onClick"]),m(D,{modelValue:t.data.modifyflag,"onUpdate:modelValue":e[5]||(e[5]=a=>t.data.modifyflag=a),title:"修改"},{default:u((()=>[c("span",null,"ID:"+f(t.data.modifydata.id),1),g,V,m(j,{modelValue:t.data.modifydata.name,"onUpdate:modelValue":e[0]||(e[0]=a=>t.data.modifydata.name=a)},null,8,["modelValue"]),w,m(j,{modelValue:t.data.modifydata.ip,"onUpdate:modelValue":e[1]||(e[1]=a=>t.data.modifydata.ip=a)},null,8,["modelValue"]),b,m(j,{modelValue:t.data.modifydata.positionx,"onUpdate:modelValue":e[2]||(e[2]=a=>t.data.modifydata.positionx=a)},null,8,["modelValue"]),h,m(j,{modelValue:t.data.modifydata.positiony,"onUpdate:modelValue":e[3]||(e[3]=a=>t.data.modifydata.positiony=a)},null,8,["modelValue"]),U,m(j,{modelValue:t.data.modifydata.describe1,"onUpdate:modelValue":e[4]||(e[4]=a=>t.data.modifydata.describe1=a)},null,8,["modelValue"]),m(S,{class:"but",type:"primary",onClick:t.modifysubmit},{default:u((()=>[r("提交")])),_:1},8,["onClick"])])),_:1},8,["modelValue"]),m(D,{modelValue:t.data.addflag,"onUpdate:modelValue":e[11]||(e[11]=a=>t.data.addflag=a),title:"添加"},{default:u((()=>[x,m(j,{modelValue:t.data.adddata.name,"onUpdate:modelValue":e[6]||(e[6]=a=>t.data.adddata.name=a)},null,8,["modelValue"]),C,m(j,{modelValue:t.data.adddata.ip,"onUpdate:modelValue":e[7]||(e[7]=a=>t.data.adddata.ip=a)},null,8,["modelValue"]),k,m(j,{modelValue:t.data.adddata.positionx,"onUpdate:modelValue":e[8]||(e[8]=a=>t.data.adddata.positionx=a)},null,8,["modelValue"]),_,m(j,{modelValue:t.data.adddata.positiony,"onUpdate:modelValue":e[9]||(e[9]=a=>t.data.adddata.positiony=a)},null,8,["modelValue"]),I,m(j,{modelValue:t.data.adddata.describe1,"onUpdate:modelValue":e[10]||(e[10]=a=>t.data.adddata.describe1=a)},null,8,["modelValue"]),m(S,{class:"but",type:"primary",onClick:t.addsubmit},{default:u((()=>[r("提交")])),_:1},8,["onClick"])])),_:1},8,["modelValue"])],64)};export{y as default};
